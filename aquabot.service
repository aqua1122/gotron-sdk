# ë©”ì¸ ì‹¤í–‰ (í™˜ê²½ë³€ìˆ˜ ë¡œë“œ + ë´‡ ì‹¤í–‰)
ExecStart=/bin/bash -c 'set -a; source /home/minho/epusdt_new/.env; set +a; cd /home/minho/epusdt_new && ./epusdt_bot'

# ì¬ì‹œì‘ ì„¤ì •
Restart=always
RestartSec=5
StartLimitBurst=10
StartLimitInterval=60s

# ë¦¬ì†ŒìŠ¤ ì œí•œ
LimitNOFILE=65536
LimitNPROC=4096
MemoryMax=512M
CPUQuota=50%

# ë³´ì•ˆ ì„¤ì •
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/home/minho/epusdt_new /tmp
ProtectKernelTunables=true
ProtectKernelModules=true
ProtectControlGroups=true
RestrictRealtime=true
RestrictSUIDSGID=true

# ë¡œê·¸ ì„¤ì •
StandardOutput=journal
StandardError=journal
SyslogIdentifier=aquabot

# í™˜ê²½ë³€ìˆ˜
Environment=GIN_MODE=release
Environment=GO_ENV=production

# ì‹¤íŒ¨ ì‹œ ì•Œë¦¼ (ì„ íƒì‚¬í•­)
# ExecStopPost=/bin/bash -c 'if [ $EXIT_CODE -ne 0 ]; then echo "ğŸš¨ AQUA ë´‡ì´ ë¹„ì •ìƒ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. (ì½”ë“œ: $EXIT_CODE)" | wall; fi'

[Install]
WantedBy=multi-user.target

# ì¶”ê°€ ì„¹ì…˜ë“¤
[Service]
# íƒ€ì„ì•„ì›ƒ ì„¤ì •
TimeoutStartSec=30s
TimeoutStopSec=10s

# í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹ ê´€ë¦¬
KillMode=mixed
KillSignal=SIGTERM
SendSIGKILL=yes
SendSIGHUP=yes

# ì‘ì—… ë””ë ‰í† ë¦¬ ë³´í˜¸
ReadWritePaths=/home/minho/epusdt_new
ReadOnlyPaths=/
ReadOnlyPaths=/usr
ReadOnlyPaths=/boot
ReadOnlyPaths=/etc
